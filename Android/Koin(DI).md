## Koin(DI) : 의존성 주입

- 클래스 내부에서 객체를 생성하지 않고, 외부에서 객체를 생성하여 주입하는 방식이다.

### 바꾸기 전

```
// 코틀린 예시
class Manager() {
}

class Store1() {
    val manager = Manager()
}

class Store2() {
    val manager = Manager()
}
```

위와 같이 구현하게 되면 Manager 클래스에 수정이 생기면 Store1 과 Store2에 모두 수정이 필요해진다. </br>

### 바뀐 후

```
class Manager() {
}

class Store1(val manager: Manager) {
}

class Store2(val manager: Manager) {
}
```

위와 같이 수정하면 외부에서 객체를 만들어서 Store1 과 Store2 에 제공하고 있기 때문에 Manager 클래스에 변경이 생겨도 수정할 필요가 없어진다. 코드가 훨씬 깔끔해지는 것이다.

### DI 적용의 이점

1. 코드의 가독성과 재사용성을 높여준다.
2. 단위 테스트하기 편하다.
3. 객체 간의 의존 관계를 직접 설정 할 수 있다.
4. 객체 간의 결합도를 낮출 수 있습니다.

## 안드로이드에서의 DI

안드로이드에서는 어떤 Activity나 Fragment에서 객체를 생성하는지에 따라 context가 계속 바뀌기 때문에 같은 클래스 타입 객체임에도 다르게 동작할 수 있다. 하지만 객체를 생성하고 주입 받아 사용하는 방식으로 구현하면 context의 영향을 받지 않고도 공통으로 재사용할 수 있는 객체를 구현하게 된다. 매우 편리하다는 말씀!

참고로 안드로이드에서는 두가지 방식의 의존성 주입이 가능하다.

1. 생성자 주입 : 생성자를 통해 의존하는 객체 전달
2. 필드 주입 : 객체가 초기화된 후에 의존하는 객체 전달

### KOIN

안드로이드에서는 Koin 이라는 DI 프레임워크를 사용하여 편하게 의존성 주입을 구현할 수 있다.

#### 용어 설명

- single : 앱이 실행되는 동안 계속 유지되는 싱글톤 객체를 생성
- factory : 요청할 때마다 매번 새로운 객체 생성
- get() : 컴포넌트 내에서 알맞은 의존성을 주입 받는다.
